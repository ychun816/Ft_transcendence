services:
    dev:
        container_name: trans-dev
        image: ima-dev
        build:
            context: ..
            dockerfile: .devcontainer/Dockerfile
            target: dev
        volumes:
            - ..:/app
            - /app/node_modules
        ports:
            - "3001:3000"
            - "3442:3443"
            - "5172:5173"
        environment:
            - NODE_ENV=development
            - DEBUG=true
        restart: unless-stopped

    # prod:
    #     container_name: trans-prod
    #     image: ima-prod
    #     build:
    #         context: ..
    #         dockerfile: .devcontainer/Dockerfile
    #         target: prod
    #     # volumes:
    #     #   - ..:/app
    #     # - /app/node_modules
    #     ports:
    #         - "3000:3001"
    #     command: ["npm", "start"]
    #     environment:
    #         - NODE_ENV=production
